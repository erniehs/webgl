var rot = 0.0;

function drawScene(gl, programInfo, buffers, deltaTime) {
  gl.clearColor(0.392157, 0.584314, 0.929412, 1.0);
  gl.clearDepth(1.0);
  gl.enable(gl.DEPTH_TEST);
  gl.enable(gl.CULL_FACE);

  // transformation matricies
  const projectionMatrix = camera.projectionMatrix(gl);
  const worldMatrix = glMatrix.mat4.fromYRotation(glMatrix.mat4.create(), rot);
  const viewMatrix = camera.viewMatrix();

  // shader program
  gl.useProgram(programInfo.program);

  // lighting
  const lightDirection = glMatrix.vec3.normalize(
    glMatrix.vec3.create(),
    [0, -1, -1]
  );
  gl.uniformMatrix4fv(
    programInfo.uniforms.u_projection,
    false,
    projectionMatrix
  );
  gl.uniformMatrix4fv(programInfo.uniforms.u_view, false, viewMatrix);
  gl.uniformMatrix4fv(programInfo.uniforms.u_world, false, worldMatrix);
  gl.uniform3fv(programInfo.uniforms.u_lightDirection, lightDirection);

  buffers.forEach((buffer) => {
    // uniforms
    gl.uniform4fv(programInfo.uniforms.u_diffuse, buffer.diffuse.concat(1));

    // vertex buffer
    gl.bindBuffer(gl.ARRAY_BUFFER, buffer.vb);
    gl.vertexAttribPointer(
      programInfo.attributes.a_position,
      3,
      gl.FLOAT,
      false,
      0,
      0
    );
    gl.enableVertexAttribArray(programInfo.attributes.a_position);

    // normal buffer
    gl.bindBuffer(gl.ARRAY_BUFFER, buffer.nb);
    gl.vertexAttribPointer(
      programInfo.attributes.a_normal,
      3,
      gl.FLOAT,
      false,
      0,
      0
    );
    gl.enableVertexAttribArray(programInfo.attributes.a_normal);

    // draw
    gl.drawArrays(gl.TRIANGLES, 0, buffer.length);
  });
  //rot += deltaTime;
}

const materials = `
# Blender MTL File: 'None'
# Material Count: 3

newmtl Material
Ns 323.999994
Ka 1.000000 1.000000 1.000000
Kd 0.800000 0.800000 0.800000
Ks 0.500000 0.500000 0.500000
Ke 0.000000 0.000000 0.000000
Ni 1.450000
d 1.000000
illum 2
`;

const model = `
# Blender v2.92.0 OBJ File: ''
# www.blender.org
mtllib untitled.mtl
o Cube
v 0.555548 0.555548 -1.000000
v 0.555548 1.000000 -0.555548
v 1.000000 0.555548 -0.555548
v 0.555548 -1.000000 -0.555548
v 0.555548 -0.555548 -1.000000
v 1.000000 -0.555548 -0.555548
v 1.000000 0.555548 0.555548
v 0.555548 1.000000 0.555548
v 0.555548 0.555548 1.000000
v 1.000000 -0.555548 0.555548
v 0.555548 -0.555548 1.000000
v 0.555548 -1.000000 0.555548
v -0.555548 0.555548 -1.000000
v -1.000000 0.555548 -0.555548
v -0.555548 1.000000 -0.555548
v -1.000000 -0.555548 -0.555548
v -0.555548 -0.555548 -1.000000
v -0.555548 -1.000000 -0.555548
v -1.000000 0.555548 0.555548
v -0.555548 0.555548 1.000000
v -0.555548 1.000000 0.555548
v -0.555548 -1.000000 0.555548
v -0.555548 -0.555548 1.000000
v -1.000000 -0.555548 0.555548
v 0.000000 -1.000000 0.509597
v 0.000000 1.000000 0.509597
v 0.103316 -1.000000 0.499805
v 0.103316 1.000000 0.499805
v -0.440329 -1.000000 -0.283116
v -0.440329 1.000000 -0.283116
v -0.202660 -1.000000 0.470806
v -0.202660 1.000000 0.470806
v -0.489267 -1.000000 -0.195014
v -0.103315 -1.000000 0.499805
v -0.489267 1.000000 -0.195014
v -0.103315 1.000000 0.499805
v 0.202661 -1.000000 0.470806
v 0.202661 1.000000 0.470806
v 0.294218 -1.000000 0.423714
v 0.294218 1.000000 0.423714
v -0.294218 1.000000 -0.423714
v -0.103316 1.000000 -0.499805
v -0.202661 1.000000 -0.470806
v -0.519403 -1.000000 -0.099417
v 0.103316 1.000000 -0.499805
v -0.519403 1.000000 -0.099417
v 0.294218 1.000000 -0.423714
v 0.202661 1.000000 -0.470806
v -0.000000 1.000000 -0.509597
v 0.440329 1.000000 0.283117
v 0.440329 1.000000 -0.283117
v 0.529579 1.000000 0.000000
v 0.519403 1.000000 0.099417
v 0.519403 1.000000 -0.099417
v 0.489267 1.000000 -0.195014
v 0.374469 1.000000 0.360339
v 0.489267 1.000000 0.195014
v 0.374469 -1.000000 0.360339
v 0.374469 1.000000 -0.360339
v -0.529579 -1.000000 0.000000
v -0.529579 1.000000 0.000000
v 0.440329 -1.000000 0.283117
v 0.489267 -1.000000 0.195014
v -0.519403 -1.000000 0.099418
v -0.519403 1.000000 0.099418
v -0.440328 1.000000 0.283117
v -0.489267 1.000000 0.195015
v 0.519403 -1.000000 0.099417
v -0.374469 1.000000 -0.360339
v -0.294218 1.000000 0.423714
v -0.489267 -1.000000 0.195015
v -0.374468 1.000000 0.360340
v 0.529579 -1.000000 0.000000
v 0.519403 -1.000000 -0.099417
v -0.440328 -1.000000 0.283117
v -0.374469 -1.000000 -0.360339
v -0.103316 -1.000000 -0.499805
v -0.202661 -1.000000 -0.470806
v -0.294218 -1.000000 -0.423714
v 0.103316 -1.000000 -0.499805
v 0.294218 -1.000000 -0.423714
v 0.489267 -1.000000 -0.195014
v 0.202661 -1.000000 -0.470806
v -0.000000 -1.000000 -0.509597
v -0.374468 -1.000000 0.360340
v 0.440329 -1.000000 -0.283117
v -0.294218 -1.000000 0.423714
v 0.374469 -1.000000 -0.360339
vt 0.569444 0.055556
vt 0.430556 0.194444
vt 0.430556 0.055556
vt 0.569444 0.805557
vt 0.430556 0.944443
vt 0.430556 0.805556
vt 0.569444 0.555556
vt 0.430556 0.694443
vt 0.430556 0.555556
vt 0.569444 0.444443
vt 0.625000 0.444444
vt 0.569444 0.500000
vt 0.319444 0.555556
vt 0.319444 0.500000
vt 0.375000 0.555556
vt 0.569444 0.694443
vt 0.625000 0.694444
vt 0.569444 0.750000
vt 0.430556 0.750000
vt 0.375000 0.805556
vt 0.375000 0.805556
vt 0.569444 0.250000
vt 0.569444 0.250000
vt 0.625000 0.194444
vt 0.430556 0.250000
vt 0.375000 0.194444
vt 0.569444 0.000000
vt 0.625000 0.055556
vt 0.180556 0.694443
vt 0.180556 0.750000
vt 0.125000 0.694444
vt 0.125000 0.555556
vt 0.180556 0.555556
vt 0.430556 0.000000
vt 0.430556 0.305556
vt 0.569444 0.194444
vt 0.569444 0.305556
vt 0.625000 0.944444
vt 0.625000 0.805556
vt 0.680556 0.694443
vt 0.680556 0.555556
vt 0.319443 0.694443
vt 0.625000 0.305556
vt 0.430556 0.444444
vt 1.000000 0.560727
vt 0.968750 0.939273
vt 1.000000 0.939273
vt 0.937500 0.560727
vt 0.968750 0.560727
vt 0.906250 0.560727
vt 0.937500 0.939273
vt 0.875000 0.560727
vt 0.906250 0.939273
vt 0.843750 0.560727
vt 0.875000 0.939273
vt 0.812500 0.560727
vt 0.843750 0.939273
vt 0.781250 0.560727
vt 0.812500 0.939273
vt 0.750000 0.560727
vt 0.781250 0.939273
vt 0.718750 0.560727
vt 0.750000 0.939273
vt 0.687500 0.560727
vt 0.718750 0.939273
vt 0.656250 0.560727
vt 0.687500 0.939273
vt 0.625000 0.560727
vt 0.656250 0.939273
vt 0.593750 0.939273
vt 0.625000 0.939273
vt 0.593750 0.560727
vt 0.562500 0.939273
vt 0.562500 0.560727
vt 0.531250 0.939273
vt 0.531250 0.560727
vt 0.500000 0.939273
vt 0.500000 0.560727
vt 0.468750 0.939273
vt 0.468750 0.560727
vt 0.437500 0.939273
vt 0.437500 0.560727
vt 0.406250 0.939273
vt 0.406250 0.560727
vt 0.375000 0.939273
vt 0.343750 0.939273
vt 0.375000 0.560727
vt 0.343750 0.560727
vt 0.312500 0.939273
vt 0.312500 0.560727
vt 0.281250 0.939273
vt 0.281250 0.560727
vt 0.250000 0.939273
vt 0.250000 0.560727
vt 0.218750 0.939273
vt 0.218750 0.560727
vt 0.187500 0.939273
vt 0.218750 0.939273
vt 0.187500 0.560727
vt 0.156250 0.939273
vt 0.156250 0.560727
vt 0.125000 0.939273
vt 0.093750 0.560727
vt 0.125000 0.560727
vt 0.093750 0.939273
vt 0.062500 0.560727
vt 0.062500 0.939273
vt 0.031250 0.939273
vt 0.000000 0.560727
vt 0.000000 0.939273
vt 0.183803 0.625000
vt 0.316197 0.625000
vt 0.819444 0.555556
vt 0.819443 0.694443
vt 0.816197 0.625000
vt 0.683803 0.625000
vt 0.569444 0.944443
vt 0.180556 0.500000
vt 0.319444 0.750000
vt 0.031250 0.560727
vt 0.194959 0.660390
vt 0.203191 0.670042
vt 0.203191 0.579958
vt 0.194959 0.589610
vt 0.188842 0.600623
vt 0.188842 0.649377
vt 0.185075 0.637427
vt 0.185075 0.612573
vt 0.213223 0.677964
vt 0.224667 0.683851
vt 0.213223 0.572036
vt 0.224667 0.566149
vt 0.237086 0.687476
vt 0.250000 0.688699
vt 0.237086 0.562524
vt 0.250000 0.561300
vt 0.262914 0.687476
vt 0.262914 0.562524
vt 0.275333 0.683851
vt 0.286777 0.677964
vt 0.275333 0.566149
vt 0.286777 0.572036
vt 0.296809 0.670042
vt 0.305041 0.660390
vt 0.296809 0.579958
vt 0.305041 0.589610
vt 0.311158 0.649377
vt 0.314925 0.637427
vt 0.311158 0.600623
vt 0.314925 0.612573
vt 0.805041 0.589611
vt 0.796809 0.579958
vt 0.796808 0.670042
vt 0.805041 0.660390
vt 0.811158 0.649377
vt 0.811158 0.600623
vt 0.814925 0.612573
vt 0.814925 0.637427
vt 0.786777 0.677964
vt 0.786777 0.572036
vt 0.775333 0.566149
vt 0.775332 0.683851
vt 0.762914 0.687476
vt 0.762914 0.562524
vt 0.750000 0.561300
vt 0.750000 0.688699
vt 0.737086 0.562524
vt 0.737085 0.687476
vt 0.724667 0.683851
vt 0.724667 0.566149
vt 0.713223 0.572036
vt 0.713223 0.677964
vt 0.703191 0.670042
vt 0.703191 0.579958
vt 0.694959 0.589610
vt 0.694959 0.660390
vt 0.688842 0.649377
vt 0.688842 0.600623
vt 0.685075 0.612573
vt 0.685075 0.637427
vn -1.0000 0.0000 0.0000
vn 0.0000 0.0000 1.0000
vn 1.0000 0.0000 0.0000
vn 0.5774 0.5774 -0.5774
vn 0.5774 -0.5774 -0.5774
vn 0.5774 0.5774 0.5774
vn 0.5774 -0.5774 0.5774
vn -0.5774 0.5774 -0.5774
vn -0.5774 -0.5774 -0.5774
vn -0.5774 0.5774 0.5774
vn -0.5774 -0.5774 0.5774
vn -0.7071 -0.7071 0.0000
vn 0.0000 -0.7071 -0.7071
vn 0.7071 0.0000 -0.7071
vn -0.7071 0.0000 0.7071
vn 0.7071 0.0000 0.7071
vn -0.7071 0.0000 -0.7071
vn 0.0000 0.7071 0.7071
vn 0.7071 0.7071 0.0000
vn 0.0000 -0.7071 0.7071
vn -0.7071 0.7071 0.0000
vn 0.0000 0.7071 -0.7071
vn 0.7071 -0.7071 0.0000
vn 0.0000 0.0000 -1.0000
vn -0.0944 0.0000 -0.9955
vn -0.2802 0.0000 -0.9599
vn -0.4574 0.0000 -0.8893
vn -0.6198 0.0000 -0.7848
vn -0.7609 0.0000 -0.6489
vn -0.8742 0.0000 -0.4856
vn -0.9537 0.0000 -0.3007
vn -0.9948 0.0000 -0.1018
vn -0.9948 0.0000 0.1018
vn -0.9537 0.0000 0.3007
vn -0.8742 0.0000 0.4856
vn -0.7609 0.0000 0.6489
vn -0.6198 0.0000 0.7848
vn -0.4574 0.0000 0.8893
vn -0.2802 0.0000 0.9599
vn -0.0944 0.0000 0.9955
vn 0.0944 0.0000 0.9955
vn 0.2802 0.0000 0.9599
vn 0.4574 0.0000 0.8893
vn 0.6198 0.0000 0.7848
vn 0.7609 0.0000 0.6489
vn 0.8742 0.0000 0.4856
vn 0.9537 0.0000 0.3007
vn 0.9948 0.0000 0.1018
vn 0.9948 0.0000 -0.1018
vn 0.9537 0.0000 -0.3007
vn 0.8742 0.0000 -0.4856
vn 0.7609 0.0000 -0.6489
vn 0.6198 0.0000 -0.7848
vn 0.4574 0.0000 -0.8893
vn 0.2802 0.0000 -0.9599
vn 0.0944 0.0000 -0.9955
vn 0.0000 -1.0000 0.0000
vn 0.0000 1.0000 0.0000
usemtl Material
s off
f 19/1/1 16/2/1 24/3/1
f 9/4/2 23/5/2 11/6/2
f 3/7/3 10/8/3 6/9/3
f 1/10/4 2/11/4 3/12/4
f 4/13/5 5/14/5 6/15/5
f 7/16/6 8/17/6 9/18/6
f 10/19/7 11/20/7 12/21/7
f 13/22/8 14/23/8 15/24/8
f 16/2/9 17/25/9 18/26/9
f 19/1/10 20/27/10 21/28/10
f 22/29/11 23/30/11 24/31/11
f 22/29/12 16/32/12 18/33/12
f 18/33/13 5/14/13 4/13/13
f 6/9/14 1/10/14 3/7/14
f 20/27/15 24/3/15 23/34/15
f 11/6/16 7/16/16 9/4/16
f 17/35/17 14/36/17 13/37/17
f 21/38/18 9/4/18 8/39/18
f 8/40/19 3/7/19 2/41/19
f 12/42/20 23/30/20 22/29/20
f 15/24/21 19/1/21 21/28/21
f 2/11/22 13/37/22 15/43/22
f 4/13/23 10/8/23 12/42/23
f 13/37/24 5/44/24 17/35/24
f 26/45/25 27/46/25 25/47/25
f 38/48/26 27/46/26 28/49/26
f 40/50/27 37/51/27 38/48/27
f 56/52/28 39/53/28 40/50/28
f 50/54/29 58/55/29 56/52/29
f 57/56/30 62/57/30 50/54/30
f 53/58/31 63/59/31 57/56/31
f 52/60/32 68/61/32 53/58/32
f 54/62/33 73/63/33 52/60/33
f 55/64/34 74/65/34 54/62/34
f 51/66/35 82/67/35 55/64/35
f 59/68/36 86/69/36 51/66/36
f 59/68/37 81/70/37 88/71/37
f 47/72/38 83/73/38 81/70/38
f 48/74/39 80/75/39 83/73/39
f 45/76/40 84/77/40 80/75/40
f 49/78/41 77/79/41 84/77/41
f 42/80/42 78/81/42 77/79/42
f 43/82/43 79/83/43 78/81/43
f 41/84/44 76/85/44 79/83/44
f 29/86/45 69/87/45 30/88/45
f 30/88/46 33/89/46 29/86/46
f 35/90/47 44/91/47 33/89/47
f 46/92/48 60/93/48 44/91/48
f 61/94/49 64/95/49 60/93/49
f 65/96/50 71/97/50 64/98/50
f 67/99/51 75/100/51 71/97/51
f 66/101/52 85/102/52 75/100/52
f 70/103/53 85/102/53 72/104/53
f 87/105/54 32/106/54 31/107/54
f 32/106/55 34/108/55 31/107/55
f 34/108/56 26/109/56 25/110/56
f 22/29/57 18/33/57 60/111/57
f 4/13/57 12/42/57 73/112/57
f 15/113/58 21/114/58 61/115/58
f 8/40/58 2/41/58 52/116/58
f 19/1/1 14/36/1 16/2/1
f 9/4/2 20/117/2 23/5/2
f 3/7/3 7/16/3 10/8/3
f 22/29/12 24/31/12 16/32/12
f 18/33/13 17/118/13 5/14/13
f 6/9/14 5/44/14 1/10/14
f 20/27/15 19/1/15 24/3/15
f 11/6/16 10/8/16 7/16/16
f 17/35/17 16/2/17 14/36/17
f 21/38/18 20/117/18 9/4/18
f 8/40/19 7/16/19 3/7/19
f 12/42/20 11/119/20 23/30/20
f 15/24/21 14/36/21 19/1/21
f 2/11/22 1/10/22 13/37/22
f 4/13/23 6/9/23 10/8/23
f 13/37/24 1/10/24 5/44/24
f 26/45/25 28/49/25 27/46/25
f 38/48/26 37/51/26 27/46/26
f 40/50/27 39/53/27 37/51/27
f 56/52/28 58/55/28 39/53/28
f 50/54/29 62/57/29 58/55/29
f 57/56/30 63/59/30 62/57/30
f 53/58/31 68/61/31 63/59/31
f 52/60/32 73/63/32 68/61/32
f 54/62/33 74/65/33 73/63/33
f 55/64/34 82/67/34 74/65/34
f 51/66/35 86/69/35 82/67/35
f 59/68/36 88/71/36 86/69/36
f 59/68/37 47/72/37 81/70/37
f 47/72/38 48/74/38 83/73/38
f 48/74/39 45/76/39 80/75/39
f 45/76/40 49/78/40 84/77/40
f 49/78/41 42/80/41 77/79/41
f 42/80/42 43/82/42 78/81/42
f 43/82/43 41/84/43 79/83/43
f 41/84/44 69/87/44 76/85/44
f 29/86/45 76/85/45 69/87/45
f 30/88/46 35/90/46 33/89/46
f 35/90/47 46/92/47 44/91/47
f 46/92/48 61/94/48 60/93/48
f 61/94/49 65/96/49 64/95/49
f 65/96/50 67/99/50 71/97/50
f 67/99/51 66/101/51 75/100/51
f 66/101/52 72/104/52 85/102/52
f 70/103/53 87/105/53 85/102/53
f 87/105/54 70/103/54 32/106/54
f 32/106/55 36/120/55 34/108/55
f 34/108/56 36/120/56 26/109/56
f 75/121/57 85/122/57 22/29/57
f 18/33/57 76/123/57 29/124/57
f 18/33/57 29/124/57 33/125/57
f 71/126/57 75/121/57 22/29/57
f 64/127/57 71/126/57 22/29/57
f 18/33/57 33/125/57 44/128/57
f 60/111/57 64/127/57 22/29/57
f 18/33/57 44/128/57 60/111/57
f 22/29/57 85/122/57 87/129/57
f 22/29/57 87/129/57 31/130/57
f 79/131/57 76/123/57 18/33/57
f 78/132/57 79/131/57 18/33/57
f 22/29/57 31/130/57 34/133/57
f 22/29/57 34/133/57 25/134/57
f 77/135/57 78/132/57 18/33/57
f 84/136/57 77/135/57 18/33/57
f 12/42/57 22/29/57 25/134/57
f 12/42/57 25/134/57 27/137/57
f 84/136/57 18/33/57 4/13/57
f 80/138/57 84/136/57 4/13/57
f 12/42/57 27/137/57 37/139/57
f 12/42/57 37/139/57 39/140/57
f 83/141/57 80/138/57 4/13/57
f 81/142/57 83/141/57 4/13/57
f 12/42/57 39/140/57 58/143/57
f 12/42/57 58/143/57 62/144/57
f 88/145/57 81/142/57 4/13/57
f 86/146/57 88/145/57 4/13/57
f 12/42/57 62/144/57 63/147/57
f 12/42/57 63/147/57 68/148/57
f 82/149/57 86/146/57 4/13/57
f 74/150/57 82/149/57 4/13/57
f 12/42/57 68/148/57 73/112/57
f 73/112/57 74/150/57 4/13/57
f 30/151/58 69/152/58 15/113/58
f 21/114/58 72/153/58 66/154/58
f 21/114/58 66/154/58 67/155/58
f 35/156/58 30/151/58 15/113/58
f 46/157/58 35/156/58 15/113/58
f 21/114/58 67/155/58 65/158/58
f 61/115/58 46/157/58 15/113/58
f 21/114/58 65/158/58 61/115/58
f 70/159/58 72/153/58 21/114/58
f 15/113/58 69/152/58 41/160/58
f 15/113/58 41/160/58 43/161/58
f 32/162/58 70/159/58 21/114/58
f 36/163/58 32/162/58 21/114/58
f 15/113/58 43/161/58 42/164/58
f 15/113/58 42/164/58 49/165/58
f 26/166/58 36/163/58 21/114/58
f 26/166/58 21/114/58 8/40/58
f 2/41/58 15/113/58 49/165/58
f 2/41/58 49/165/58 45/167/58
f 28/168/58 26/166/58 8/40/58
f 38/169/58 28/168/58 8/40/58
f 2/41/58 45/167/58 48/170/58
f 2/41/58 48/170/58 47/171/58
f 40/172/58 38/169/58 8/40/58
f 56/173/58 40/172/58 8/40/58
f 2/41/58 47/171/58 59/174/58
f 2/41/58 59/174/58 51/175/58
f 50/176/58 56/173/58 8/40/58
f 57/177/58 50/176/58 8/40/58
f 2/41/58 51/175/58 55/178/58
f 2/41/58 55/178/58 54/179/58
f 53/180/58 57/177/58 8/40/58
f 2/41/58 54/179/58 52/116/58
f 52/116/58 53/180/58 8/40/58
`;

function main() {
  // resize the canvas
  const canvas = document.querySelector("#grid");
  canvas.width = canvas.parentElement.clientWidth;
  canvas.height = canvas.parentElement.clientHeight;

  // init the gl
  var gl = canvas.getContext("webgl");
  if (!gl) {
    alert("failed to initialize WebGL. you suck!");
    return;
  }

  // vertex and fragment shaders
  const vsSource = `
    attribute vec4 a_position;
    attribute vec3 a_normal;
    
    uniform mat4 u_projection;
    uniform mat4 u_view;
    uniform mat4 u_world;
    
    varying vec3 v_normal;
    
    void main() {
      gl_Position = u_projection * u_view * u_world * a_position;
      v_normal = mat3(u_world) * a_normal;
    }
  `;

  const fsSource = `
    precision mediump float;
  
    varying vec3 v_normal;
    
    uniform vec4 u_diffuse;
    uniform vec3 u_lightDirection;
    
    void main () {
      vec3 normal = normalize(v_normal);
      float fakeLight = dot(u_lightDirection, normal) * .5 + .5;
      gl_FragColor = vec4(u_diffuse.rgb * fakeLight, u_diffuse.a);
    }
  `;

  const shaderProgram = glUtils.initShaderProgram(gl, vsSource, fsSource);

  const programInfo = {
    program: shaderProgram,
    attributes: {
      a_position: gl.getAttribLocation(shaderProgram, "a_position"),
      a_normal: gl.getAttribLocation(shaderProgram, "a_normal"),
    },
    uniforms: {
      u_projection: gl.getUniformLocation(shaderProgram, "u_projection"),
      u_view: gl.getUniformLocation(shaderProgram, "u_view"),
      u_world: gl.getUniformLocation(shaderProgram, "u_world"),
      u_diffuse: gl.getUniformLocation(shaderProgram, "u_diffuse"),
      u_lightDirection: gl.getUniformLocation(
        shaderProgram,
        "u_lightDirection"
      ),
    },
  };

  const obj = wavefront.parse(model, materials);
  console.log(obj);
  const buffers = glUtils.initBuffersFromWavefront(gl, obj);

  var then = 0;
  function render(now) {
    now *= 0.001;
    const deltaTime = now - then;
    then = now;
    drawScene(gl, programInfo, buffers, deltaTime);
    requestAnimationFrame(render);
  }
  requestAnimationFrame(render);
}

main();
